(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[5154],{99679:(t,e,n)=>{"use strict";n.d(e,{j:()=>r});n(96026),n(21249),n(2707),n(83710),n(57658),n(30381),n(49492);function r(t,e){t=t.sort((function(t,e){return t.timestamp-e.timestamp})),e=e.sort((function(t,e){return t.timestamp-e.timestamp}));var n=0,r=0,s=[];while(n<t.length&&r<e.length){var u=t[n],a=e[r];if(t!==e||u!==a){var i=new Date(u.timestamp),o=new Date(a.timestamp),c=new Date(new Date(u.timestamp).valueOf()+1e3*u.duration),l=new Date(new Date(a.timestamp).valueOf()+1e3*a.duration);if(i<o&&o<c||i<l&&l<=c){var v={start:i,end:c,event:u},h={start:o,end:l,event:a};s.push([v,h])}a.timestamp+1e3*a.duration>u.timestamp+1e3*u.duration?n++:r++}else n++}return s.length>0&&console.warn("Overlapping events found",s),s}},85154:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>f});var r=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("Merge buckets")]),e("p",{staticClass:"small"},[t._v("Sometimes, you might want to merge the events of two buckets together into one. This is commonly useful to address the case where your hostname might have changed, creating two buckets for the same watcher and host, which you want to combine together again.")]),e("b-row",[e("b-col",[e("h4",[t._v("Bucket from")]),e("b-form-select",{attrs:{options:t.buckets,disabled:0===t.buckets.length},model:{value:t.bucket_from,callback:function(e){t.bucket_from=e},expression:"bucket_from"}}),e("p",{staticClass:"small"},[t._v("Select the bucket from which you want to merge the events. This bucket will be deleted after the merge.")]),null!==t.events_from?e("p",{staticClass:"small"},[t._v("Events: "+t._s(t.events_from.length))]):t._e()],1),e("b-col",[e("h4",[t._v("Bucket to")]),e("b-form-select",{attrs:{options:t.buckets,disabled:0===t.buckets.length},model:{value:t.bucket_to,callback:function(e){t.bucket_to=e},expression:"bucket_to"}}),e("p",{staticClass:"small"},[t._v("Select the bucket to which you want to merge the events. This bucket will remain after the merge.")]),null!==t.events_to?e("p",{staticClass:"small"},[t._v("Events: "+t._s(t.events_to.length))]):t._e()],1)],1),null!==t.overlappingEvents&&t.overlappingEvents.length>0?e("div",[e("h3",[t._v("Overlapping events")]),e("p",[t._v("The following "+t._s(t.overlappingEvents.length)+" events are overlapping:"),e("ul",t._l(t.overlappingEvents,(function(n){return e("li",[t._v(t._s(n[0].start)+" - "+t._s(n[0].end)+" ("+t._s(n[0].event.id)+") overlaps with "+t._s(n[1].start)+" - "+t._s(n[1].end)+" ("+t._s(n[1].event.id)+")")])})),0)])]):t._e(),e("b-button",{attrs:{variant:"success",disabled:!t.validate},on:{click:function(e){return t.merge()}}},[t._v("Merge")])],1)},s=[],u=n(51055),a=n(27981),i=(n(21249),n(47941),n(47840)),o=n(99679);const c={name:"aw-bucket-merge",data:function(){return{buckets:[],bucket_from:null,bucket_to:null,events_from:null,events_to:null}},computed:{validate:function(){var t=null!==this.bucket_from&&null!==this.bucket_to,e=this.bucket_from!==this.bucket_to,n=null!==this.overlappingEvents&&0===this.overlappingEvents.length;return t&&e&&n},overlappingEvents:function(){return null===this.events_from||null===this.events_to?null:(0,o.j)(this.events_from,this.events_to)}},watch:{bucket_from:function(){var t=(0,a.Z)((0,u.Z)().mark((function t(e){return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getEvents(e);case 2:this.events_from=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),bucket_to:function(){var t=(0,a.Z)((0,u.Z)().mark((function t(e){return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getEvents(e);case 2:this.events_to=t.sent;case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){this.getBuckets()},methods:{merge:function(){var t=(0,a.Z)((0,u.Z)().mark((function t(){var e,n,r,s;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=(0,i.s3)(),n=this.events_from,r=this.bucket_to,t.next=5,e.insertEvents(r,n);case 5:s=t.sent,console.log("result",s);case 7:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getBuckets:function(){var t=(0,a.Z)((0,u.Z)().mark((function t(){var e,n;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=(0,i.s3)(),t.next=3,e.getBuckets();case 3:n=t.sent,this.buckets=Object.keys(n).map((function(t){return{value:t,text:t}}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getEvents:function(){var t=(0,a.Z)((0,u.Z)().mark((function t(e){var n;return(0,u.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=(0,i.s3)(),t.next=3,n.getEvents(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},l=c;var v=n(1001),h=(0,v.Z)(l,r,s,!1,null,null,null);const f=h.exports},40098:t=>{var e=Math.ceil,n=Math.max;function r(t,r,s,u){var a=-1,i=n(e((r-t)/(s||1)),0),o=Array(i);while(i--)o[u?i:++a]=t,t+=s;return o}t.exports=r},27561:(t,e,n)=>{var r=n(67990),s=/^\s+/;function u(t){return t?t.slice(0,r(t)+1).replace(s,""):t}t.exports=u},47445:(t,e,n)=>{var r=n(40098),s=n(16612),u=n(18601);function a(t){return function(e,n,a){return a&&"number"!=typeof a&&s(e,n,a)&&(n=a=void 0),e=u(e),void 0===n?(n=e,e=0):n=u(n),a=void 0===a?e<n?1:-1:u(a),r(e,n,a,t)}}t.exports=a},16612:(t,e,n)=>{var r=n(77813),s=n(98612),u=n(65776),a=n(13218);function i(t,e,n){if(!a(n))return!1;var i=typeof e;return!!("number"==i?s(n)&&u(e,n.length):"string"==i&&e in n)&&r(n[e],t)}t.exports=i},67990:t=>{var e=/\s/;function n(t){var n=t.length;while(n--&&e.test(t.charAt(n)));return n}t.exports=n},96026:(t,e,n)=>{var r=n(47445),s=r();t.exports=s},18601:(t,e,n)=>{var r=n(14841),s=1/0,u=17976931348623157e292;function a(t){if(!t)return 0===t?t:0;if(t=r(t),t===s||t===-s){var e=t<0?-1:1;return e*u}return t===t?t:0}t.exports=a},14841:(t,e,n)=>{var r=n(27561),s=n(13218),u=n(33448),a=NaN,i=/^[-+]0x[0-9a-f]+$/i,o=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;function v(t){if("number"==typeof t)return t;if(u(t))return a;if(s(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=s(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=r(t);var n=o.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):i.test(t)?a:+t}t.exports=v}}]);
//# sourceMappingURL=5154.6326e2bc.js.map
"use strict";(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[1422,4792],{27549:(t,e,i)=>{i.d(e,{P:()=>l});var a=i(50257),r=i(18446),n=i.n(r),o=(i(41539),i(70189),i(78783),i(33948),i(84944),i(33792),i(21249),i(26833),i(69600),i(57327),i(74916),i(23123),i(69826),i(68309),i(99679),i(3181)),s=i(86845);function l(t,e){var i=">>>",r=t;if(r){var l=new Set(Object.values(r).map((function(t){return t.cat_events.map((function(t){return t.data["$category"].join(i)}))})).flat()),c=(0,a.Z)(l).map((function(t){var a=(0,s.v)(),l=a.get_category(t.split(i));if(l){var c=Object.values(r).map((function(t){var e=t.cat_events.find((function(t){return n()(t.data["$category"],l.name)}));return e?Math.round(e.duration/3600*1e3)/1e3:null}));return{label:l.name.join(" > "),backgroundColor:(0,o.EB)(l,e),data:c}}console.error("missing category:",t)})).filter((function(t){return t}));return c}return[]}},99679:(t,e,i)=>{i.d(e,{j:()=>a});i(96026),i(21249),i(2707),i(83710),i(57658),i(30381),i(49492);function a(t,e){t=t.sort((function(t,e){return t.timestamp-e.timestamp})),e=e.sort((function(t,e){return t.timestamp-e.timestamp}));var i=0,a=0,r=[];while(i<t.length&&a<e.length){var n=t[i],o=e[a];if(t!==e||n!==o){var s=new Date(n.timestamp),l=new Date(o.timestamp),c=new Date(new Date(n.timestamp).valueOf()+1e3*n.duration),u=new Date(new Date(o.timestamp).valueOf()+1e3*o.duration);if(s<l&&l<c||s<u&&u<=c){var h={start:s,end:c,event:n},p={start:l,end:u,event:o};r.push([h,p])}o.timestamp+1e3*o.duration>n.timestamp+1e3*n.duration?i++:a++}else i++}return r.length>0&&console.warn("Overlapping events found",r),r}},14792:(t,e,i)=>{i.r(e),i.d(e,{default:()=>m});let a={};const r={name:"fa-icon",props:{name:{type:String,validator(t){return!t||t in a||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${t}".\nPlease make sure you have imported this icon before using it.`),!1)}},title:String,scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator(t){return"horizontal"===t||"vertical"===t}},label:String,tabindex:[Number,String]},data(){return{id:s(),x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}},computed:{normalizedScale(){let t=this.scale;return t="undefined"===typeof t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse,[this.$options.name]:!0}},icon(){return this.name?a[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:t,height:e}=this.icon;return Math.max(t,e)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let t=this.icon.raw,e={};return t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,((t,i,a)=>{let r=s();return e[a]=r,` id="${r}"`})),t=t.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,((t,i,a,r)=>{let n=i||r;return n&&e[n]?`#${e[n]}`:t})),t},focusable(){let{tabindex:t}=this;if(null==t)return"false";let e="string"===typeof t?parseInt(t,10):t;return e>=0?null:"false"}},mounted(){this.updateStack()},updated(){this.updateStack()},methods:{updateStack(){if(!this.name&&null!==this.name&&0===this.$children.length)return void console.warn('Invalid prop: prop "name" is required.');if(this.icon)return;let t=0,e=0;this.$children.forEach((i=>{i.outerScale=this.normalizedScale,t=Math.max(t,i.width),e=Math.max(e,i.height)})),this.childrenWidth=t,this.childrenHeight=e,this.$children.forEach((i=>{i.x=(t-i.width)/2,i.y=(e-i.height)/2}))}},render(t){if(null===this.name)return t();let e={class:this.klass,style:this.style,attrs:{role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":String(!(this.label||this.title)),tabindex:this.tabindex,x:this.x,y:this.y,width:this.width,height:this.height,viewBox:this.box,focusable:this.focusable}},i=`vat-${this.id}`;if(this.title&&(e.attrs["aria-labelledby"]=i),this.raw){let t=this.raw;this.title&&(t=`<title id="${i}">${c(this.title)}</title>${t}`),e.domProps={innerHTML:t}}let a=this.title?[t("title",{attrs:{id:i}},this.title)]:[];return t("svg",e,this.raw?null:a.concat(this.$slots.default||[...this.icon.paths.map(((e,i)=>t("path",{attrs:e,key:`path-${i}`}))),...this.icon.polygons.map(((e,i)=>t("polygon",{attrs:e,key:`polygon-${i}`})))]))},register(t){for(let e in t){let i=t[e],{paths:r=[],d:o,polygons:s=[],points:l}=i;o&&r.push({d:o}),l&&s.push({points:l}),a[e]=n({},i,{paths:r,polygons:s})}},icons:a};function n(t,...e){return e.forEach((e=>{for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})),t}let o=870711;function s(){return`va-${(o++).toString(16)}`}const l={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function c(t){return t.replace(/[<>"&]/g,(t=>l[t]||t))}const u=r;var h,p,d=i(1001),v=(0,d.Z)(u,h,p,!1,null,null,null);const m=v.exports},51422:(t,e,i)=>{i.r(e),i.d(e,{default:()=>S});i(69600);var a=function(){var t=this,e=t._self._c;return e("div",[e("h5",[t.editable?e("icon",{staticClass:"handle",staticStyle:{opacity:"0.6",cursor:"grab"},attrs:{name:"bars"}}):t._e(),t._v(t._s(t.visualizations[t.type].title))],1),t.editable?e("div",{staticClass:"vis-style-dropdown-btn"},[e("b-dropdown",{staticClass:"mr-1",attrs:{size:"sm",variant:"outline-secondary",right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[e("icon",{attrs:{name:"cog"}})]},proxy:!0}],null,!1,3998156753)},t._l(t.types,(function(i){return e("b-dropdown-item",{key:i,attrs:{variant:"outline-secondary"},on:{click:function(e){return t.$emit("onTypeChange",t.id,i)}}},[t._v(t._s(t.visualizations[i].title)+" "),t.visualizations[i].available?t._e():e("span",{staticClass:"small",staticStyle:{color:"#A50"}},[t._v("(no data)")])])})),1),e("b-button",{staticClass:"p-0",attrs:{size:"sm",variant:"outline-danger"},on:{click:function(e){return t.$emit("onRemove",t.id)}}},[e("icon",{attrs:{name:"times"}})],1)],1):t._e(),t.supports_period?t._e():e("div",[e("b-alert",{staticClass:"small px-2 py-1",attrs:{show:"",variant:"warning"}},[t._v("This feature doesn't support the current time period.")])],1),t.activityStore.buckets.loaded?e("div",[t.has_prerequisites?t._e():e("div",[e("b-alert",{staticClass:"small px-2 py-1",attrs:{show:"",variant:"warning"}},[t._v("This feature is missing data from a required watcher. You can find a list of all watchers in "),e("a",{attrs:{href:"https://activitywatch.readthedocs.io/en/latest/watchers.html"}},[t._v("the documentation")]),t._v(".")])],1),"top_apps"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.window.top_apps,namefunc:function(t){return t.data.app},colorfunc:function(t){return t.data.app},with_limit:""}})],1):t._e(),"top_titles"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.window.top_titles,namefunc:function(t){return t.data.title},colorfunc:function(t){return t.data.title},with_limit:""}})],1):t._e(),"top_domains"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.browser.top_domains,namefunc:function(t){return t.data.$domain},colorfunc:function(t){return t.data.$domain},with_limit:""}})],1):t._e(),"top_urls"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.browser.top_urls,namefunc:function(t){return t.data.url},colorfunc:function(t){return t.data.$domain},with_limit:""}})],1):t._e(),"top_editor_files"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.editor.top_files,namefunc:t.top_editor_files_namefunc,hoverfunc:t.top_editor_files_hoverfunc,colorfunc:function(t){return t.data.language},with_limit:""}})],1):t._e(),"top_editor_languages"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.editor.top_languages,namefunc:function(t){return t.data.language},colorfunc:function(t){return t.data.language},with_limit:""}})],1):t._e(),"top_editor_projects"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.editor.top_projects,namefunc:t.top_editor_projects_namefunc,hoverfunc:t.top_editor_projects_hoverfunc,colorfunc:function(t){return t.data.language},with_limit:""}})],1):t._e(),"top_categories"==t.type?e("div",[e("aw-summary",{attrs:{fields:t.activityStore.category.top,namefunc:function(t){return t.data["$category"].join(" > ")},colorfunc:function(t){return t.data["$category"].join(" > ")},linkfunc:function(e){return"#"+t.$route.path+"?category="+encodeURIComponent(e.data["$category"].join(">"))},with_limit:""}})],1):t._e(),"category_tree"==t.type?e("div",[e("aw-categorytree",{attrs:{events:t.activityStore.category.top}})],1):t._e(),"category_sunburst"==t.type?e("div",[e("aw-sunburst-categories",{staticStyle:{height:"20em"},attrs:{data:t.top_categories_hierarchy}})],1):t._e(),"timeline_barchart"==t.type?e("div",[e("aw-timeline-barchart",{staticStyle:{height:"100"},attrs:{datasets:t.datasets,timeperiod_start:t.activityStore.query_options.timeperiod.start,timeperiod_length:t.activityStore.query_options.timeperiod.length}})],1):t._e(),"sunburst_clock"==t.type?e("div",[e("aw-sunburst-clock",{attrs:{date:t.date,afkBucketId:t.activityStore.buckets.afk[0],windowBucketId:t.activityStore.buckets.window[0]}})],1):t._e(),"custom_vis"==t.type?e("div",[e("aw-custom-vis",{attrs:{visname:t.props.visname,title:t.props.title}})],1):t._e(),"vis_timeline"==t.type&&t.isSingleDay?e("div",[e("vis-timeline",{attrs:{buckets:t.timeline_buckets,showRowLabels:!0,queriedInterval:t.timeline_daterange}})],1):t._e(),"score"==t.type?e("div",[e("aw-score")],1):t._e()]):t._e()])},r=[],n=i(51055),o=i(27981),s=i(18446),l=i.n(s),c=(i(68309),i(21249),i(9653),i(43371),i(49769),i(14169),i(14792));c["default"].register({bars:{width:448,height:512,paths:[{d:"M16 132c-8.8 0-16-7.2-16-16v-40c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v40c0 8.8-7.2 16-16 16h-416zM16 292c-8.8 0-16-7.2-16-16v-40c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v40c0 8.8-7.2 16-16 16h-416zM16 452c-8.8 0-16-7.2-16-16v-40c0-8.8 7.2-16 16-16h416c8.8 0 16 7.2 16 16v40c0 8.8-7.2 16-16 16h-416z"}]}});var u=i(27549),h=i(21036),p=i(72195),d=i(86845),v=i(85711),m=i(30381),f=i.n(m);function _(t){return t.name=t.subname,t.children=t.children.map(_),t}const y={name:"aw-selectable-vis",props:{id:Number,type:String,props:Object,editable:{type:Boolean,default:!0}},data:function(){return{activityStore:(0,p.j)(),categoryStore:(0,d.v)(),types:["top_apps","top_titles","top_domains","top_urls","top_categories","category_tree","category_sunburst","top_editor_files","top_editor_languages","top_editor_projects","timeline_barchart","sunburst_clock","custom_vis","vis_timeline","score"],top_editor_files_namefunc:function(t){var e=t.data.file||"";return e=e.split("/"),e=e[e.length-1],e},top_editor_files_hoverfunc:function(t){return"file: "+t.data.file+"\nproject: "+t.data.project},top_editor_projects_namefunc:function(t){var e=t.data.project||"";return e=e.split("/"),e=e[e.length-1],e},top_editor_projects_hoverfunc:function(t){return t.data.project},timeline_buckets:null}},computed:{visualizations:function(){return{top_apps:{title:"Top Applications",available:this.activityStore.window.available||this.activityStore.android.available},top_titles:{title:"Top Window Titles",available:this.activityStore.window.available},top_domains:{title:"Top Browser Domains",available:this.activityStore.browser.available},top_urls:{title:"Top Browser URLs",available:this.activityStore.browser.available},top_editor_files:{title:"Top Editor Files",available:this.activityStore.editor.available},top_editor_languages:{title:"Top Editor Languages",available:this.activityStore.editor.available},top_editor_projects:{title:"Top Editor Projects",available:this.activityStore.editor.available},top_categories:{title:"Top Categories",available:this.activityStore.category.available},category_tree:{title:"Category Tree",available:this.activityStore.category.available},category_sunburst:{title:"Category Sunburst",available:this.activityStore.category.available},timeline_barchart:{title:"Timeline (barchart)",available:!0},sunburst_clock:{title:"Sunburst clock",available:this.activityStore.window.available&&this.activityStore.active.available},vis_timeline:{title:"Daily Timeline (Chronological)",available:!0},custom_vis:{title:"Custom Visualization",available:!0},score:{title:"Score",available:this.activityStore.category.available}}},has_prerequisites:function(){return this.visualizations[this.type].available},supports_period:function(){return"sunburst_clock"!=this.type&&"vis_timeline"!=this.type||this.isSingleDay},top_categories_hierarchy:function(){var t=this.activityStore.category.top;if(t){var e=t.map((function(t){return{name:t.data.$category,size:t.duration}}));return{name:"All",children:(0,h.wF)(e).map((function(t){return _(t)}))}}return null},datasets:function(){if(!this.activityStore.category.by_period)return[];var t=(0,u.P)(this.activityStore.category.by_period,this.categoryStore.classes);return t.length>0?t:null},date:function(){var t=this.activityStore.query_options.date;return t||(t=this.activityStore.query_options.timeperiod.start),t},timeline_daterange:function(){if(null===this.activityStore.query_options)return null;var t=this.activityStore.query_options.date;return t||(t=this.activityStore.query_options.timeperiod.start),[f()(t),f()(t).add(1,"day")]},isSingleDay:function(){return l()(this.activityStore.query_options.timeperiod.length,[1,"day"])}},watch:{timeline_daterange:function(){var t=(0,o.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getTimelineBuckets();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),type:function(){var t=(0,o.Z)((0,n.Z)().mark((function t(e){return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("vis_timeline"!=e){t.next=3;break}return t.next=3,this.getTimelineBuckets();case 3:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){var t=(0,o.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("vis_timeline"!=this.type){t.next=3;break}return t.next=3,this.getTimelineBuckets();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{getTimelineBuckets:function(){var t=(0,o.Z)((0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if("vis_timeline"==this.type){t.next=2;break}return t.abrupt("return");case 2:if(this.timeline_daterange){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,(0,v.U)().ensureLoaded();case 6:return t.t0=Object,t.next=9,(0,v.U)().getBucketsWithEvents({start:this.timeline_daterange[0].format(),end:this.timeline_daterange[1].format()});case 9:t.t1=t.sent,this.timeline_buckets=t.t0.freeze.call(t.t0,t.t1);case 11:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}},g=y;var b=i(1001),w=(0,b.Z)(g,a,r,!1,null,null,null);const S=w.exports},49769:(t,e,i)=>{var a=i(14792);a["default"].register({cog:{width:512,height:512,paths:[{d:"M487.4 315.7c4.9 2.8 7.1 8.6 5.6 14.1-11.1 35.7-30 67.9-54.7 94.6-3.8 4.2-9.9 5.1-14.8 2.3l-42.6-24.6c-18 15.3-38.6 27.2-60.8 35.1v49.2c0 5.6-3.9 10.5-9.4 11.7-34.9 7.8-72.5 8.2-109.2 0-5.5-1.2-9.4-6.1-9.4-11.7v-49.2c-22.3-7.8-42.9-19.7-60.8-35.1l-42.6 24.6c-4.8 2.8-11 1.8-14.8-2.3-24.7-26.8-43.6-59-54.7-94.6-1.6-5.4 0.6-11.2 5.5-14l42.6-24.6c-4.3-23.2-4.3-47 0-70.2l-42.6-24.6c-4.9-2.8-7.2-8.6-5.5-14 11.1-35.7 30-67.9 54.7-94.6 3.8-4.2 9.9-5.1 14.8-2.3l42.5 24.6c18-15.3 38.6-27.2 60.8-35.1v-49.2c0-5.6 3.9-10.5 9.4-11.7 34.9-7.8 72.5-8.2 109.2 0 5.5 1.2 9.4 6.1 9.4 11.7v49.1c22.3 7.8 42.9 19.7 60.8 35.1l42.6-24.6c4.8-2.8 11-1.8 14.8 2.3 24.7 26.8 43.6 59 54.7 94.6 1.6 5.4-0.6 11.2-5.5 14l-42.6 24.6c4.3 23.2 4.3 47 0 70.2zM256 336c44.1 0 80-35.9 80-80s-35.9-80-80-80-80 35.9-80 80 35.9 80 80 80z"}]}})},14169:(t,e,i)=>{var a=i(14792);a["default"].register({times:{width:352,height:512,paths:[{d:"M242.7 256l100.1 100.1c12.3 12.3 12.3 32.2 0 44.5l-22.2 22.2c-12.3 12.3-32.2 12.3-44.5 0l-100.1-100.1-100.1 100.1c-12.3 12.3-32.2 12.3-44.5 0l-22.2-22.2c-12.3-12.3-12.3-32.2 0-44.5l100.1-100.1-100.1-100.1c-12.3-12.3-12.3-32.2 0-44.5l22.2-22.2c12.3-12.3 32.2-12.3 44.5 0l100.1 100.1 100.1-100.1c12.3-12.3 32.2-12.3 44.5 0l22.2 22.2c12.3 12.3 12.3 32.2 0 44.5z"}]}})}}]);
//# sourceMappingURL=1422.65050ea4.js.map
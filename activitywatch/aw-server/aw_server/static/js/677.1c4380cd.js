(self["webpackChunkaw_webui"]=self["webpackChunkaw_webui"]||[]).push([[677],{99679:(t,e,n)=>{"use strict";n.d(e,{j:()=>s});n(96026),n(21249),n(2707),n(83710),n(57658),n(30381),n(49492);function s(t,e){t=t.sort((function(t,e){return t.timestamp-e.timestamp})),e=e.sort((function(t,e){return t.timestamp-e.timestamp}));var n=0,s=0,r=[];while(n<t.length&&s<e.length){var a=t[n],i=e[s];if(t!==e||a!==i){var l=new Date(a.timestamp),u=new Date(i.timestamp),o=new Date(new Date(a.timestamp).valueOf()+1e3*a.duration),c=new Date(new Date(i.timestamp).valueOf()+1e3*i.duration);if(l<u&&u<o||l<c&&c<=o){var v={start:l,end:o,event:a},p={start:u,end:c,event:i};r.push([v,p])}i.timestamp+1e3*i.duration>a.timestamp+1e3*a.duration?n++:s++}else n++}return r.length>0&&console.warn("Overlapping events found",r),r}},677:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>m});n(28733),n(38862),n(83710);var s=function(){var t=this,e=t._self._c;return e("div",[e("h3",[t._v("Validate buckets")]),e("p",{staticClass:"small"},[t._v("This is a small tool to check the validity of your buckets and their events.")]),e("b-row",[e("b-col",[e("h4",[t._v("Bucket")]),e("b-form-select",{attrs:{options:t.buckets,disabled:0===t.buckets.length},model:{value:t.bucket,callback:function(e){t.bucket=e},expression:"bucket"}}),e("p",{staticClass:"small"},[t._v("Select the bucket to validate.")]),null!==t.events?e("p",{staticClass:"small"},[t._v("Events: "+t._s(t.events.length))]):t._e()],1)],1),null!==t.duplicateEvents?e("div",[e("details",[e("summary",[0===t.duplicateEvents.length?e("icon",{staticClass:"mx-2",staticStyle:{color:"#0C0"},attrs:{name:"check"}}):e("icon",{staticClass:"mx-2",staticStyle:{color:"#CC0"},attrs:{name:"exclamation-triangle"}}),t._v("Duplicates: "+t._s(t.duplicateEvents.length))],1),e("div",{staticClass:"p-2"},[0===t.duplicateEvents.length?e("p",[t._v("No duplicate events found.")]):e("p",[t._v("The following "+t._s(t.duplicateEvents.length)+" duplicates were found."),e("ul",{staticClass:"mt-2"},t._l(t.duplicateEvents,(function(n){return e("li",[t._v(t._s(n[0].start.toISOString())+" - (id: "+t._s(n[0].event.id)+" & "+t._s(n[1].event.id)+"): "+t._s(JSON.stringify(n[0].data)))])})),0)])])])]):t._e(),null!==t.overlappingEvents?e("div",[e("details",[e("summary",[0===t.overlappingEvents.length?e("icon",{staticClass:"mx-2",staticStyle:{color:"#0C0"},attrs:{name:"check"}}):e("icon",{staticClass:"mx-2",staticStyle:{color:"#CC0"},attrs:{name:"exclamation-triangle"}}),t._v("Overlaps: "+t._s(t.overlappingEvents.length)+"x with a total duration of "+t._s(t._f("friendlyduration")(t.overlapDuration/1e3)))],1),e("div",{staticClass:"p-2"},[0===t.overlappingEvents.length?e("p",[t._v("No overlapping events found.")]):e("p",[t._v("The following "+t._s(t.overlappingEvents.length)+" overlaps were found."),e("br"),t.overlapDurationSameData>0?e("span",[t._v("Of these, "+t._s(t._f("friendlyduration")(t.overlapDurationSameData/1e3))+" are overlaps where the data is the same. These events could potentially be merged.")]):t._e()]),t._l(t.overlappingEvents,(function(n){return e("p",{staticClass:"mt-2"},[e("ul",[e("li",[t._v(t._s(n[0].start.toISOString())+"/"+t._s(n[0].end.toISOString())+" - (id: "+t._s(n[0].event.id)+"): "+t._s(JSON.stringify(n[0].event.data)))]),e("li",[t._v(t._s(n[1].start.toISOString())+"/"+t._s(n[1].end.toISOString())+" - (id: "+t._s(n[1].event.id)+"): "+t._s(JSON.stringify(n[1].event.data)))])])])})),e("p")],2)])]):t._e(),null!==t.zeroDurationEvents?e("div",[e("details",[e("summary",[0===t.zeroDurationEvents.length?e("icon",{staticClass:"mx-2",staticStyle:{color:"#0C0"},attrs:{name:"check"}}):e("icon",{staticClass:"mx-2",staticStyle:{color:"#09F"},attrs:{name:"info-circle"}}),t._v("Zero-duration events: "+t._s(t.zeroDurationEvents.length))],1),e("div",{staticClass:"p-2"},[0===t.zeroDurationEvents.length?e("p",{staticClass:"ml-3"},[t._v("No zero-duration events found.")]):e("p",{staticClass:"ml-3"},[t._v("The following "+t._s(t.zeroDurationEvents.length)+" zero-duration events were found:"),e("ul",{staticClass:"mt-2"},t._l(t.zeroDurationEvents,(function(n){return e("li",[t._v(t._s(n.timestamp.toISOString())+"/"+t._s(new Date(new Date(n.timestamp).valueOf()+1e3*n.duration).toISOString())+" - (id: "+t._s(n.id)+"): "+t._s(JSON.stringify(n.data)))])})),0)])])])]):t._e()],1)},r=[],a=n(51055),i=n(27981),l=n(18446),u=n.n(l),o=(n(57327),n(41539),n(85827),n(21249),n(47941),n(46308),n(39886),n(14792));o["default"].register({"info-circle":{width:512,height:512,paths:[{d:"M256 8c137 0 248 111.1 248 248 0 137-111 248-248 248s-248-111-248-248c0-136.9 111-248 248-248zM256 118c-23.2 0-42 18.8-42 42s18.8 42 42 42 42-18.8 42-42-18.8-42-42-42zM312 372v-24c0-6.6-5.4-12-12-12h-12v-100c0-6.6-5.4-12-12-12h-64c-6.6 0-12 5.4-12 12v24c0 6.6 5.4 12 12 12h12v64h-12c-6.6 0-12 5.4-12 12v24c0 6.6 5.4 12 12 12h88c6.6 0 12-5.4 12-12z"}]}});var c=n(47840),v=n(99679);const p={name:"aw-bucket-merge",data:function(){return{buckets:[],bucket:null,events:null}},computed:{validate:function(){var t=null!==this.bucket,e=null!==this.overlappingEvents&&0===this.overlappingEvents.length;return t&&e},duplicateEvents:function(){return null===this.overlappingEvents?null:this.overlappingEvents.filter((function(t){if(u()(t[0].start,t[1].start)&&u()(t[0].end,t[1].end)&&u()(t[0].event.data,t[1].event.data))return!0}))},overlappingEvents:function(){return null===this.events?null:(0,v.j)(this.events,this.events)},overlapDuration:function(){return null===this.overlappingEvents?null:this.overlappingEvents.reduce((function(t,e){var n=e[0].start>e[1].start?e[0].start:e[1].start,s=e[0].end<e[1].end?e[0].end:e[1].end;return t+(s-n)}),0)},overlapDurationSameData:function(){return null===this.overlappingEvents?null:this.overlappingEvents.reduce((function(t,e){if(!u()(e[0].event.data,e[1].event.data))return t;var n=e[0].start>e[1].start?e[0].start:e[1].start,s=e[0].end<e[1].end?e[0].end:e[1].end;return t+(s-n)}),0)},zeroDurationEvents:function(){return null===this.events?null:this.events.filter((function(t){return 0===t.duration}))}},watch:{bucket:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e){return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.events=null,t.next=3,this.getEvents(e);case 3:this.events=t.sent;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){this.getBuckets()},methods:{getBuckets:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(){var e,n;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=(0,c.s3)(),t.next=3,e.getBuckets();case 3:n=t.sent,this.buckets=Object.keys(n).map((function(t){return{value:t,text:t}}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getEvents:function(){var t=(0,i.Z)((0,a.Z)().mark((function t(e){var n;return(0,a.Z)().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=(0,c.s3)(),t.next=3,n.getEvents(e);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},d=p;var f=n(1001),h=(0,f.Z)(d,s,r,!1,null,null,null);const m=h.exports},40098:t=>{var e=Math.ceil,n=Math.max;function s(t,s,r,a){var i=-1,l=n(e((s-t)/(r||1)),0),u=Array(l);while(l--)u[a?l:++i]=t,t+=r;return u}t.exports=s},27561:(t,e,n)=>{var s=n(67990),r=/^\s+/;function a(t){return t?t.slice(0,s(t)+1).replace(r,""):t}t.exports=a},47445:(t,e,n)=>{var s=n(40098),r=n(16612),a=n(18601);function i(t){return function(e,n,i){return i&&"number"!=typeof i&&r(e,n,i)&&(n=i=void 0),e=a(e),void 0===n?(n=e,e=0):n=a(n),i=void 0===i?e<n?1:-1:a(i),s(e,n,i,t)}}t.exports=i},16612:(t,e,n)=>{var s=n(77813),r=n(98612),a=n(65776),i=n(13218);function l(t,e,n){if(!i(n))return!1;var l=typeof e;return!!("number"==l?r(n)&&a(e,n.length):"string"==l&&e in n)&&s(n[e],t)}t.exports=l},67990:t=>{var e=/\s/;function n(t){var n=t.length;while(n--&&e.test(t.charAt(n)));return n}t.exports=n},96026:(t,e,n)=>{var s=n(47445),r=s();t.exports=r},18601:(t,e,n)=>{var s=n(14841),r=1/0,a=17976931348623157e292;function i(t){if(!t)return 0===t?t:0;if(t=s(t),t===r||t===-r){var e=t<0?-1:1;return e*a}return t===t?t:0}t.exports=i},14841:(t,e,n)=>{var s=n(27561),r=n(13218),a=n(33448),i=NaN,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,o=/^0o[0-7]+$/i,c=parseInt;function v(t){if("number"==typeof t)return t;if(a(t))return i;if(r(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=r(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=s(t);var n=u.test(t);return n||o.test(t)?c(t.slice(2),n?2:8):l.test(t)?i:+t}t.exports=v},46308:(t,e,n)=>{"use strict";var s=n(14792);s["default"].register({check:{width:512,height:512,paths:[{d:"M173.9 439.4l-166.4-166.4c-10-10-10-26.2 0-36.2l36.2-36.2c10-10 26.2-10 36.2 0l112.1 112.1 240.1-240.1c10-10 26.2-10 36.2 0l36.2 36.2c10 10 10 26.2 0 36.2l-294.4 294.4c-10 10-26.2 10-36.2 0z"}]}})}}]);
//# sourceMappingURL=677.1c4380cd.js.map
{"version":3,"file":"js/3275.3be6ac4e.js","mappings":"yIAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MACtE,EACIE,EAAkB,G,uCCAhBC,EAAKC,QAAQ,MACbC,EAAQD,QAAQ,SAChBE,EAAIF,QAAQ,UACZG,EAASH,QAAQ,UAIjBI,EAAOJ,QAAQ,gBAErB,SAASK,EAAOC,GAEdA,EAAOC,UAAY,GAGnBR,EAAGS,OAAOF,GAAQG,KAAK,UAAW,aAAaA,KAAK,QAAS,OAC/D,CAEA,SAASC,EAAWJ,EAAQK,GAC1B,IAAMC,EAAWb,EAAGS,OAAOF,GAC3BM,EAASC,UAAU,KAAKC,SAExBF,EACGG,OAAO,QACPN,KAAK,IAAK,KACVA,KAAK,IAAK,KACVE,KAAKA,GACLF,KAAK,cAAe,cACpBA,KAAK,YAAa,KAClBA,KAAK,OAAQ,QAClB,CAEA,SAASO,EAAOV,EAAQW,EAAQC,GAC9B,IAAMN,EAAWb,EAAGS,OAAOF,GAG3B,GAFAM,EAASC,UAAU,KAAKC,WAEpBG,EAAOE,QAAU,GAArB,CAKAF,EAASf,EAAEkB,MAAMH,GACjBf,EAAEmB,QAAQJ,GACV,IAAMK,EAAUpB,EAAEqB,MAAMN,GAClBO,EAAStB,EAAEuB,KAAKR,GAChBS,EAAUvB,EAAOmB,EAAQK,WACzBC,EAASzB,EAAOqB,EAAOG,WACvBE,GAAkBD,EAASF,GAAW,IAAOF,EAAOM,SAwD1D,OAvDAC,QAAQC,IAAI,UAAYN,EAAQO,UAChCF,QAAQC,IAAI,SAAWJ,EAAOK,UAC9BF,QAAQC,IAAI,aAAeH,GAG3B3B,EAAEgC,KAAKjB,GAAQ,SAAUkB,EAAGC,GAC1B,IAAMC,EAAK,kBAAoBD,EACzBT,EAAYxB,EAAOgC,EAAER,WAErBW,GAAaC,EAAAA,EAAAA,KAAmBC,EAAAA,EAAAA,IAAa,CAAEC,KAAMvB,GAAciB,IACnEO,EAAczC,EAAMqC,GAAYK,OAAO,IAAKC,MAE5CC,GAAKlB,EAAYD,GAAW,IAAOG,EACnCiB,EAAS,IAAMX,EAAEL,SAAYD,EAE7BkB,EAAKnC,EACRG,OAAO,KACPN,KAAK,KAAM4B,GACX5B,KAAK,YAAa,aAAe,IAAMoC,EAArB,OAEfG,EAAOD,EACVhC,OAAO,QACPN,KAAK,QAASqC,GACdrC,KAAK,SAAU,GACfwC,MAAM,OAAQX,GACdY,GAAG,aAAa,SAAUC,EAAGC,EAAGC,GAC/B,IAAMC,EAAOD,EAAED,GACfE,EAAKL,MAAMM,KAAOb,CACpB,IACCQ,GAAG,YAAY,SAAUC,EAAGC,EAAGC,GAC9B,IAAMC,EAAOD,EAAED,GACfE,EAAKL,MAAMM,KAAOjB,CACpB,IAEFU,EACGjC,OAAO,SACPJ,KACCgB,EAAUM,SAAVN,eAGEvB,EAAKoD,oBAAoBrB,EAAEL,UAC3B,KACA2B,KAAKC,UAAUvB,EAAEwB,OAGnBxB,EAAEL,SAAW,IAAOD,GACtBkB,EAAGhC,OAAO,QACPN,KAAK,YAAa,GAClBA,KAAK,IAAK,GACVA,KAAK,IAAK,KACVA,KAAK,iBAAkB,QACvBE,MAAK6B,EAAAA,EAAAA,IAAa,CAAEC,KAAMvB,GAAciB,GAE/C,IAEO7B,CAhEP,CAFEI,EAAWJ,EAAQ,UAmEvB,CAEA,SACED,OAAQA,EACRW,OAAQA,GD1GV,GACI4C,KAAM,cACNC,MAAO,CACHpB,KAAMqB,OACN5C,WAAY4C,OACZ7C,OAAQ8C,OAEZC,MAAO,CACH/C,OAAQ,WACJgD,EAAgBjD,OAAO,KAAKkD,IAAK,KAAKjD,OAAQ,KAAKC,WACvD,GAEJiD,QAAS,WACLF,EAAgB5D,OAAO,KAAK6D,IAChC,GEjBuU,I,cCQvUE,GAAY,OACd,EACA3E,EACAK,GACA,EACA,KACA,WACA,MAIF,QAAesE,EAAiB,O","sources":["webpack://aw-webui/./src/visualizations/TimelineSimple.vue","webpack://aw-webui/./src/visualizations/timeline-simple.js","webpack://aw-webui/./src/visualizations/TimelineSimple.vue?ed53","webpack://aw-webui/./src/visualizations/TimelineSimple.vue?019d"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('svg')\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","'use strict';\n\nconst d3 = require('d3');\nconst Color = require('color');\nconst _ = require('lodash');\nconst moment = require('moment');\n\nimport { getTitleAttr, getColorFromString } from '../util/color';\n\nconst time = require('../util/time');\n\nfunction create(svg_el) {\n  // Clear element\n  svg_el.innerHTML = '';\n\n  // svg for the colored timeline\n  d3.select(svg_el).attr('viewBox', '0 0 100 4').attr('width', '100%');\n}\n\nfunction set_status(svg_el, text) {\n  const timeline = d3.select(svg_el);\n  timeline.selectAll('*').remove();\n\n  timeline\n    .append('text')\n    .attr('x', '0')\n    .attr('y', '3')\n    .text(text)\n    .attr('font-family', 'sans-serif')\n    .attr('font-size', '2')\n    .attr('fill', 'black');\n}\n\nfunction update(svg_el, events, event_type) {\n  const timeline = d3.select(svg_el);\n  timeline.selectAll('*').remove();\n\n  if (events.length <= 0) {\n    set_status(svg_el, 'No data');\n    return;\n  }\n\n  events = _.clone(events);\n  _.reverse(events);\n  const e_first = _.first(events);\n  const e_last = _.last(events);\n  const m_first = moment(e_first.timestamp);\n  const m_last = moment(e_last.timestamp);\n  const total_duration = (m_last - m_first) / 1000 + e_last.duration;\n  console.log('First: ' + m_first.format());\n  console.log('Last: ' + m_last.format());\n  console.log('Duration: ' + total_duration);\n\n  // Iterate over each event and create interval boxes\n  _.each(events, function (e, i) {\n    const id = 'timeline_event_' + i;\n    const timestamp = moment(e.timestamp);\n\n    const color_base = getColorFromString(getTitleAttr({ type: event_type }, e));\n    const color_hover = Color(color_base).darken(0.4).hex();\n\n    const x = (timestamp - m_first) / 1000 / total_duration;\n    const width = (100 * e.duration) / total_duration;\n\n    const eg = timeline\n      .append('g')\n      .attr('id', id)\n      .attr('transform', 'translate(' + 100 * x + ',' + 0 + ')');\n\n    const rect = eg\n      .append('rect')\n      .attr('width', width)\n      .attr('height', 4)\n      .style('fill', color_base)\n      .on('mouseover', function (d, j, n) {\n        const elem = n[j];\n        elem.style.fill = color_hover;\n      })\n      .on('mouseout', function (d, j, n) {\n        const elem = n[j];\n        elem.style.fill = color_base;\n      });\n\n    rect\n      .append('title')\n      .text(\n        timestamp.format() +\n          '\\n' +\n          'Duration: ' +\n          time.seconds_to_duration(e.duration) +\n          '\\n' +\n          JSON.stringify(e.data)\n      );\n\n    if (e.duration > 0.05 * total_duration) {\n      eg.append('text')\n        .attr('font-size', 2)\n        .attr('x', 1)\n        .attr('y', 2.5)\n        .attr('pointer-events', 'none')\n        .text(getTitleAttr({ type: event_type }, e));\n    }\n  });\n\n  return svg_el;\n}\n\nexport default {\n  create: create,\n  update: update,\n};\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TimelineSimple.vue?vue&type=script&lang=ts\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/@vue/cli-plugin-typescript/node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??clonedRuleSet-38.use[2]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./TimelineSimple.vue?vue&type=script&lang=ts\"","import { render, staticRenderFns } from \"./TimelineSimple.vue?vue&type=template&id=ad967da4&scoped=true&lang=pug\"\nimport script from \"./TimelineSimple.vue?vue&type=script&lang=ts\"\nexport * from \"./TimelineSimple.vue?vue&type=script&lang=ts\"\nimport style0 from \"./TimelineSimple.vue?vue&type=style&index=0&id=ad967da4&prod&scoped=true&lang=scss\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ad967da4\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticRenderFns","d3","require","Color","_","moment","time","create","svg_el","innerHTML","select","attr","set_status","text","timeline","selectAll","remove","append","update","events","event_type","length","clone","reverse","e_first","first","e_last","last","m_first","timestamp","m_last","total_duration","duration","console","log","format","each","e","i","id","color_base","getColorFromString","getTitleAttr","type","color_hover","darken","hex","x","width","eg","rect","style","on","d","j","n","elem","fill","seconds_to_duration","JSON","stringify","data","name","props","String","Array","watch","timeline_simple","$el","mounted","component"],"sourceRoot":""}